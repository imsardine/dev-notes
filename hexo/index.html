<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">  
    <link rel="canonical" href="https://imsardine.github.io/dev-notes/hexo/">
    <link rel="shortcut icon" href="../img/favicon.ico">

    
    <title>Hexo - 建造以學習 | 在電梯裡遇見雙胞胎</title>
    

    <link rel="stylesheet" href="//use.fontawesome.com/releases/v5.5.0/css/all.css" integrity="sha384-B4dIYHKNBt8Bc12p+WXckhzcICo0wtJAoU8YZTY5qE0Id1GSseTk6S+L3BlXeVIU" crossorigin="anonymous">
    <link rel="stylesheet" href="//cdn.jsdelivr.net/font-hack/3.003/css/hack.min.css">
    <link href='//fonts.googleapis.com/css?family=PT+Sans:400,400italic,700,700italic&subset=latin-ext,latin' rel='stylesheet' type='text/css'>
    <link href='//fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,700italic,400,300,600,700&subset=latin-ext,latin' rel='stylesheet' type='text/css'>
    <link href="../css/bootstrap-custom.min.css" rel="stylesheet">
    <link href="../css/base.min.css" rel="stylesheet">
    <link href="../css/cinder.min.css" rel="stylesheet">
    <link rel="stylesheet" href="../css/highlight.min.css">
    <link href="../cinder_extra.css" rel="stylesheet">

    <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
            <script src="https://cdn.jsdelivr.net/npm/html5shiv@3.7.3/dist/html5shiv.min.js"></script>
            <script src="https://cdn.jsdelivr.net/npm/respond.js@1.4.2/dest/respond.min.js"></script>
        <![endif]-->

    <script src="https://ajax.googleapis.com/ajax/libs/webfont/1.6.28/webfont.js"></script>
    <script>
    WebFont.load({
        google: {
            families: ['Open Sans', 'PT Sans']
        }
    });
    </script>

    

     
</head>

<body>

    <div class="navbar navbar-default navbar-fixed-top" role="navigation">
    <div class="container">

        <!-- Collapsed navigation -->
        <div class="navbar-header">
            <!-- Expander button -->
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            

            <!-- Main title -->

            <a class="navbar-brand" href="..">建造以學習 | 在電梯裡遇見雙胞胎</a>
        </div>

        <!-- Expanded navigation -->
        <div class="navbar-collapse collapse">

            <ul class="nav navbar-nav navbar-right">
                    <li>
                        <a href="#" data-toggle="modal" data-target="#mkdocs_search_modal">
                            <i class="fas fa-search"></i> Search
                        </a>
                    </li>
                    <li>
                        <a href="https://github.com/imsardine/dev-notes/blob/source/docs/hexo.md">Edit on imsardine/dev-notes</a>
                    </li>
            </ul>
        </div>
    </div>
</div>

    <div class="container">
        
        
        <div class="col-md-3"><div class="bs-sidebar hidden-print affix well" role="complementary">
    <ul class="nav bs-sidenav">
        <li class="first-level active"><a href="#hexo">Hexo</a></li>
            <li class="second-level"><a href="#getting-started">新手上路</a></li>
                
            <li class="second-level"><a href="#configuration">Configuration ??</a></li>
                
            <li class="second-level"><a href="#server">Server</a></li>
                
            <li class="second-level"><a href="#_1">顯示作者 ??</a></li>
                
            <li class="second-level"><a href="#setup">安裝設置</a></li>
                
                <li class="third-level"><a href="#docker">Docker</a></li>
            <li class="second-level"><a href="#reference">參考資料</a></li>
                
    </ul>
</div></div>
        <div class="col-md-9" role="main">

<h1 id="hexo">Hexo<a class="headerlink" href="#hexo" title="Permanent link"> #</a></h1>
<ul>
<li>
<p><a href="https://hexo.io/">Hexo</a></p>
<ul>
<li>A fast, simple &amp; powerful blog framework</li>
<li>Blazing Fast &ndash; Node.js brings you incredible generating speed. Hundreds of files take only seconds to build.</li>
<li>Markdown Support &ndash; All features of GitHub Flavored Markdown are supported. You can even use most Octopress plugins in Hexo.</li>
<li>One-Command Deployment &ndash; You only need one command to deploy your site to GitHub Pages, Heroku or other sites.</li>
<li>Various Plugins &ndash; Hexo has a powerful plugin system. You can install more plugins for Jade, CoffeeScript plugins.</li>
</ul>
</li>
<li>
<p><a href="https://hexo.io/docs/#What-is-Hexo">What is Hexo? - Documentation | Hexo</a></p>
<p>Hexo is a fast, simple and powerful blog framework. You write posts in Markdown (or other languages) and Hexo generates static files with a beautiful theme in seconds.</p>
</li>
</ul>
<h2 id="getting-started">新手上路<a class="headerlink" href="#getting-started" title="Permanent link"> #</a></h2>
<ul>
<li>
<p><a href="https://hexo.io/">Hexo</a></p>
<pre><code>npm install hexo-cli -g
hexo init blog
cd blog
npm install
hexo server
</code></pre>
<p>跟著做一遍：</p>
<pre><code>$ hexo --version # (1)
hexo-cli: 2.0.0
os: Linux 4.9.125-linuxkit linux x64
http_parser: 2.8.0
node: 10.15.3
v8: 6.8.275.32-node.51
uv: 1.23.2
zlib: 1.2.11
ares: 1.15.0
modules: 64
nghttp2: 1.34.0
napi: 3
openssl: 1.1.0j
icu: 62.1
unicode: 11.0
cldr: 33.1
tz: 2018e

$ hexo init blog
INFO  Cloning hexo-starter https://github.com/hexojs/hexo-starter.git (2)
Cloning into '/workspace/blog'...
...
Submodule 'themes/landscape' (https://github.com/hexojs/hexo-theme-landscape.git) registered for path 'themes/landscape' (2)
Cloning into '/workspace/blog/themes/landscape'..
...
Submodule path 'themes/landscape': checked out '73a23c51f8487cfcd7c6deec96ccc7543960d350'
INFO  Install dependencies
yarn install v1.13.0
info No lockfile found.
[1/4] Resolving packages...
warning hexo &gt; warehouse &gt; cuid &gt; core-js@1.2.7: core-js@&lt;2.6.8 is no longer maintained. Please, upgrade to core-js@3 or at least to actual version of core-js@2.
warning hexo &gt; hexo-fs &gt; chokidar &gt; braces &gt; snapdragon &gt; base &gt; mixin-deep@1.3.1: Critical bug fixed in v2.0.1, please upgrade to the latest version.
warning hexo &gt; hexo-fs &gt; chokidar &gt; braces &gt; snapdragon &gt; base &gt; cache-base &gt; set-value@2.0.0: Critical bug fixed in v3.0.1, please upgrade to the latest version.
warning hexo &gt; hexo-fs &gt; chokidar &gt; braces &gt; snapdragon &gt; base &gt; cache-base &gt; union-value &gt; set-value@0.4.3: Critical bug fixed in v3.0.1, please upgrade to the latest version.
[2/4] Fetching packages...
info fsevents@1.2.9: The platform "linux" is incompatible with this module.
info "fsevents@1.2.9" is an optional dependency and failed compatibility check. Excluding it from installation.
[3/4] Linking dependencies...
[4/4] Building fresh packages...
success Saved lockfile.
...
Done in 45.45s.
INFO  Start blogging with Hexo!

$ cat package.json
{
  "name": "hexo-site",
  "version": "0.0.0",
  "private": true,
  "hexo": {
    "version": ""
  },
  "dependencies": {
    "hexo": "^3.9.0", // (4)
    "hexo-generator-archive": "^0.1.5",
    "hexo-generator-category": "^0.1.3",
    "hexo-generator-index": "^0.2.1",
    "hexo-generator-tag": "^0.2.0",
    "hexo-renderer-ejs": "^0.3.1",
    "hexo-renderer-stylus": "^0.3.3",
    "hexo-renderer-marked": "^1.0.1",
    "hexo-server": "^0.3.3"
  }
}

$ tree -aFL 2
.
|-- .gitignore
|-- _config.yml    (5)
|-- node_modules/
...
|-- package.json
|-- scaffolds/     (5)
|   |-- draft.md
|   |-- page.md
|   `-- post.md
|-- source/        (5)
|   `-- _posts/
|-- themes/        (5)
|   `-- landscape/
`-- yarn.lock

276 directories, 8 files

$ cat .gitignore
.DS_Store
Thumbs.db
db.json       (6)
*.log
node_modules/ (6)
public/
.deploy*/

$ hexo server
INFO  Start processing
INFO  Hexo is running at http://localhost:4000 . Press Ctrl+C to stop. (7)
</code></pre>
<ol>
<li><code>hexo --version</code> 看的是 <code>hexo-cli</code> 套件的版本，跟某個 site 要用 <code>hexo</code> 的哪個版本無關。</li>
<li><code>hexo init HEXO_ROOT_DIR</code> 會根據 <a href="https://github.com/hexojs/hexo-starter"><code>hexo-starter</code></a> 產生一個專案，以 submodule 的方式自帶 <a href="https://github.com/hexojs/hexo-theme-landscape"><code>landscape</code></a> theme。</li>
<li><code>hexo init</code> 在產生完專案後，會自動呼叫 <code>yarn install</code> 根據 <code>package.json</code> 安裝套件到 <code>node_modules/</code> 並產生 <code>yarn.lock</code>；所以首頁說的 <code>npm install</code> 這動作就免了。</li>
<li>這才是 Hexo 的版本，其他 <code>hexo-*</code> 套件都是 plugin。</li>
<li>安裝完成後，跟內容相關的檔案、目錄有 <code>_config.yml</code> (設定)、<code>scaffolds/</code> (文件樣板)、<code>source/</code> (文件)、<code>themes/</code> (網站樣板)。</li>
<li>從自動產生的 <code>.gitignore</code> 看來，<code>db.json</code> (待會執行 <code>hexo server</code> 會產生) 跟 <code>node_modules/</code> 都不該進版本控制。</li>
<li><code>hexo server</code> 預設會在 <code>http://localhost:4000</code> 服務，跟文件寫的 <code>0.0.0.0</code> 不同 ??</li>
</ol>
</li>
</ul>
<h2 id="configuration">Configuration ??<a class="headerlink" href="#configuration" title="Permanent link"> #</a></h2>
<ul>
<li>
<p><a href="https://hexo.io/docs/configuration">Configuration | Hexo</a></p>
<ul>
<li>You can modify site settings in <code>_config.yml</code> or in an ALTERNATE config file.</li>
</ul>
<p>Using an Alternate Config</p>
<ul>
<li>
<p>A custom config file path can be specified by adding the <code>--config</code> flag to your <code>hexo</code> commands with a path to an alternate YAML or JSON config file, or a comma-separated list (no spaces) of multiple YAML or JSON files.</p>
<pre><code># use 'custom.yml' in place of '_config.yml'
$ hexo server --config custom.yml

# use 'custom.yml' &amp; 'custom2.json', prioritizing 'custom2.json'
$ hexo server --config custom.yml,custom2.json
</code></pre>
</li>
<li>
<p>Using multiple files COMBINES all the config files and saves the merged settings to <code>_multiconfig.yml</code>. The later values take precedence. It works with any number of JSON and YAML files with ARBITRARILY DEEP OBJECTS. Note that no spaces are allowed in the list.</p>
<p>For instance, in the above example if <code>foo: bar</code> is in <code>custom.yml</code>, but <code>"foo": "dinosaur"</code> is in <code>custom2.json</code>, <code>_multiconfig.yml</code> will contain <code>foo: dinosaur</code>.</p>
</li>
</ul>
<p>Overriding Theme Config</p>
<ul>
<li>
<p>Hexo themes are INDEPENDENT PROJECTS, with separate <code>_config.yml</code> files.</p>
<p>INSTEAD OF FORKING A THEME, and maintaining a custom branch with your settings, you can configure it from your site’s primary configuration file.</p>
</li>
<li>
<p>Example configuration:</p>
<pre><code># _config.yml
theme_config:
  bio: "My awesome bio"

# themes/my-theme/_config.yml
bio: "Some generic bio"
logo: "a-cool-image.png"
Resulting theme configuration:

{
  bio: "My awesome bio",
  logo: "a-cool-image.png"
}
</code></pre>
<p>從 <code>theme_config</code> 往下覆寫目前 theme 的 <code>_config.yml</code>，上面的例子假設目前用 <code>my-theme</code>，所以 <code>_config.yml</code> 的 <code>theme_config: bio</code> 會覆寫 <code>themes/my-theme/_config.yml</code> 裡的 <code>bio</code>。</p>
<p>實驗發現 <code>theme_config: footer: since: 2017</code> 會覆寫整個 <code>theme/_config.yml</code> 裡的 <code>footer:</code>，無法單純複寫 <code>since: 2017</code> 這項設定。</p>
</li>
</ul>
</li>
</ul>
<h2 id="server">Server<a class="headerlink" href="#server" title="Permanent link"> #</a></h2>
<ul>
<li>
<p><a href="https://hexo.io/docs/server.html">Server | Hexo</a> #ril</p>
<ul>
<li>
<p>With the release of Hexo 3, the server has been separated from the main module. To start using the server, you will first have to install <code>hexo-server</code>.</p>
<pre><code>$ npm install hexo-server --save
</code></pre>
<p><code>hexo init</code> 採用的<a href="https://github.com/hexojs/hexo-starter/blob/master/package.json#L17">樣板已經內建 <code>hexo-server</code> 套件</a>。</p>
</li>
<li>
<p>Once the server has been installed, run the following command to start the server. Your website will run at <a href="http://localhost:4000">http://localhost:4000</a> by default. When the server is running, Hexo will WATCH FOR FILE CHANGES and update automatically so it’s not necessary to manually restart the server.</p>
<pre><code>$ hexo server
</code></pre>
<p>根據下面 ahuigo 的提問，<code>_config.xml</code> 的變動要重啟 server 才會生效：</p>
<blockquote>
<p>Hexo server does not watch for global file <code>_config.yml</code> changes. If you change global file, it doesn&rsquo;t update automatically.</p>
</blockquote>
</li>
<li>
<p>If you want to change the port or if you’re encountering <code>EADDRINUSE</code> errors, use the <code>-p</code> option to set a different port.</p>
<pre><code>$ hexo server -p 5000
</code></pre>
</li>
</ul>
</li>
</ul>
<h2 id="_1">顯示作者 ??<a class="headerlink" href="#_1" title="Permanent link"> #</a></h2>
<ul>
<li>若要多人編輯，在文章內顯示作者就很重要。</li>
</ul>
<p>參考資料：</p>
<ul>
<li><a href="https://github.com/hexojs/hexo/issues/673">https://github.com/hexojs/hexo/issues/673</a> 加 <code>author:</code> 即可</li>
<li>直接從 commit log 來取 author 可能不太對，比如之後增加 tag，可能要修改改人的 post，但 author 應該不變；看來 front matter 裡的 <code>author:</code> 是最適合的</li>
<li>顯示 commit 也不錯啦 =&gt; <a href="https://www.npmjs.com/package/hexo-generator-author">https://www.npmjs.com/package/hexo-generator-author</a> 要搭配 Next (小修改)</li>
<li><a href="https://github.com/xcatliu/hexo-filter-author-from-git">https://github.com/xcatliu/hexo-filter-author-from-git</a> 支援 author 跟 contributor</li>
<li><a href="http://www.codeblocq.com/2016/03/Create-an-Hexo-Theme-Part-1-Index/">Create an Hexo Theme - Part 1: Index | CodeBlocQ</a> 這裡教人家怎麼宣告 author (有連結更好&hellip; 或許也可以來個 author map??)</li>
<li><a href="https://www.sitepoint.com/project-documentation-hexo/">Project Documentation with Hexo Static Site Generator</a> 自訂 theme 結果只用到 page，這也好怪&hellip;</li>
</ul>
<h2 id="setup">安裝設置<a class="headerlink" href="#setup" title="Permanent link"> #</a></h2>
<ul>
<li>
<p>用 npm 安裝 <code>hexo-cli</code> 套件 (不是 <code>hexo</code>)，就會有 <code>hexo</code> 指令可以用。</p>
<pre><code>npm install -g hexo-cli
</code></pre>
<p>不過這需要 Node.js 與 Git，用 Docker 相對單純。</p>
</li>
</ul>
<p>參考資料：</p>
<ul>
<li>
<p><a href="https://hexo.io/docs/#Installation">Installation - Documentation | Hexo</a></p>
<p>Requirements</p>
<ul>
<li>
<p>Installing Hexo is quite easy. However, you do need to have a couple of other things installed first:</p>
<ul>
<li>Node.js (Should be at least nodejs 6.9)</li>
<li>Git</li>
</ul>
<p>If your computer already has these, congratulations! Just install Hexo with npm:</p>
<pre><code>$ npm install -g hexo-cli
</code></pre>
</li>
<li>
<p>For Mac users</p>
<p>You may encounter some problems when compiling. Please install Xcode from App Store first. After Xcode is installed, open Xcode and go to Preferences -&gt; Download -&gt; Command Line Tools -&gt; Install to install command line tools.</p>
<p>看起來用 Docker 安裝是最單純的。</p>
</li>
</ul>
</li>
</ul>
<h3 id="docker">Docker<a class="headerlink" href="#docker" title="Permanent link"> #</a></h3>
<ul>
<li><a href="https://hexo.io/docs/#Installation">官方文件</a> 完全沒提到 Docker，只能自己打包 image。</li>
</ul>
<hr />
<p>參考資料：</p>
<ul>
<li><a href="https://hub.docker.com/r/idiswy/hexo/">idiswy/hexo - Docker Hub</a> #ril</li>
</ul>
<h2 id="reference">參考資料<a class="headerlink" href="#reference" title="Permanent link"> #</a></h2>
<ul>
<li><a href="https://hexo.io/">Hexo</a></li>
<li><a href="https://github.com/hexojs/hexo">hexojs/hexo - GitHub</a></li>
<li><a href="https://github.com/hexojs/hexo-cli">hexojs/hexo-cli - GitHub</a></li>
</ul>
<p>社群：</p>
<ul>
<li><a href="https://github.com/hexojs/hexo/issues">Issues · hexojs/hexo</a></li>
<li><a href="https://groups.google.com/forum/#!forum/hexo">Hexo - Google Groups</a></li>
</ul>
<p>文件：</p>
<ul>
<li><a href="https://hexo.io/docs/">Documentation | Hexo</a></li>
</ul>
<p>更多：</p>
<ul>
<li><a href="../hexo-theme/">Theme</a></li>
</ul>
<p>手冊：</p>
<ul>
<li><a href="https://hexo.io/docs/configuration">Configuration</a></li>
<li><a href="https://hexo.io/docs/commands">Commands</a></li>
</ul></div>
        
        
    </div>

    <footer class="col-md-12 text-center">
        
        <hr>
        <p>
        <small>Documentation built with <a href="http://www.mkdocs.org/">MkDocs</a>.</p></small>
        
        
    </footer>

    <script src="../js/jquery-3.3.1.min.js"></script>
    <script src="../js/bootstrap-3.0.3.min.js"></script>
    <script src="../js/highlight.pack.js"></script>
    <script>hljs.initHighlightingOnLoad();</script>
    <script>
    var base_url = '..';
    </script>
    <!-- <script data-main="../mkdocs/js/search.js" src="../mkdocs/js/require.js"></script> -->
    <script src="../js/base.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-MML-AM_CHTML"></script>
    <script src="../search/main.js"></script>

    <div class="modal" id="mkdocs_search_modal" tabindex="-1" role="dialog" aria-labelledby="Search Modal" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal">
                        <span aria-hidden="true">&times;</span>
                        <span class="sr-only">Close</span>
                    </button>
                    <h4 class="modal-title" id="exampleModalLabel">Search</h4>
                </div>
                <div class="modal-body">
                    <p>
                        From here you can search these documents. Enter your search terms below.
                    </p>
                    <form role="form">
                        <div class="form-group">
                            <input type="text" class="form-control" placeholder="Search..." id="mkdocs-search-query">
                        </div>
                    </form>
                    <div id="mkdocs-search-results"></div>
                </div>
                <div class="modal-footer">
                </div>
            </div>
        </div>
    </div>

    </body>

</html>

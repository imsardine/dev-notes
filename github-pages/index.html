<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">  
    <link rel="canonical" href="https://imsardine.github.io/dev-notes/github-pages/">
    <link rel="shortcut icon" href="../img/favicon.ico">

    
    <title>GitHub / Pages - 建造以學習 | 在電梯裡遇見雙胞胎</title>
    

    <link rel="stylesheet" href="//use.fontawesome.com/releases/v5.5.0/css/all.css" integrity="sha384-B4dIYHKNBt8Bc12p+WXckhzcICo0wtJAoU8YZTY5qE0Id1GSseTk6S+L3BlXeVIU" crossorigin="anonymous">
    <link rel="stylesheet" href="//cdn.jsdelivr.net/font-hack/3.003/css/hack.min.css">
    <link href='//fonts.googleapis.com/css?family=PT+Sans:400,400italic,700,700italic&subset=latin-ext,latin' rel='stylesheet' type='text/css'>
    <link href='//fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,700italic,400,300,600,700&subset=latin-ext,latin' rel='stylesheet' type='text/css'>
    <link href="../css/bootstrap-custom.min.css" rel="stylesheet">
    <link href="../css/base.min.css" rel="stylesheet">
    <link href="../css/cinder.min.css" rel="stylesheet">
    <link rel="stylesheet" href="../css/highlight.min.css">
    <link href="../cinder_extra.css" rel="stylesheet">

    <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
            <script src="https://cdn.jsdelivr.net/npm/html5shiv@3.7.3/dist/html5shiv.min.js"></script>
            <script src="https://cdn.jsdelivr.net/npm/respond.js@1.4.2/dest/respond.min.js"></script>
        <![endif]-->

    <script src="https://ajax.googleapis.com/ajax/libs/webfont/1.6.28/webfont.js"></script>
    <script>
    WebFont.load({
        google: {
            families: ['Open Sans', 'PT Sans']
        }
    });
    </script>

    

     
</head>

<body>

    <div class="navbar navbar-default navbar-fixed-top" role="navigation">
    <div class="container">

        <!-- Collapsed navigation -->
        <div class="navbar-header">
            <!-- Expander button -->
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            

            <!-- Main title -->

            <a class="navbar-brand" href="..">建造以學習 | 在電梯裡遇見雙胞胎</a>
        </div>

        <!-- Expanded navigation -->
        <div class="navbar-collapse collapse">

            <ul class="nav navbar-nav navbar-right">
                    <li>
                        <a href="#" data-toggle="modal" data-target="#mkdocs_search_modal">
                            <i class="fas fa-search"></i> Search
                        </a>
                    </li>
                    <li>
                        <a href="https://github.com/imsardine/dev-notes/blob/source/docs/github-pages.md">Edit on imsardine/dev-notes</a>
                    </li>
            </ul>
        </div>
    </div>
</div>

    <div class="container">
        
        
        <div class="col-md-3"><div class="bs-sidebar hidden-print affix well" role="complementary">
    <ul class="nav bs-sidenav">
        <li class="first-level active"><a href="#github-pages">GitHub / Pages</a></li>
            <li class="second-level"><a href="#usage-limits">Usage Limits ??</a></li>
                
            <li class="second-level"><a href="#getting-started">新手上路 ??</a></li>
                
            <li class="second-level"><a href="#user-organization-project-pages">User, Organization, Project Pages ??</a></li>
                
            <li class="second-level"><a href="#build">Build ??</a></li>
                
            <li class="second-level"><a href="#custom-domain">Custom Domain ??</a></li>
                
            <li class="second-level"><a href="#custom-404-page">Custom 404 Page ??</a></li>
                
            <li class="second-level"><a href="#cache">Cache ??</a></li>
                
            <li class="second-level"><a href="#google-ads">Google Ads ??</a></li>
                
            <li class="second-level"><a href="#commercial-use">GitHub Pages 可以放商業網站嗎 ??</a></li>
                
            <li class="second-level"><a href="#stop-indexing">搜尋引擎不要爬 GitHub Pages 的內容 ??</a></li>
                
            <li class="second-level"><a href="#reference">參考資料</a></li>
                
    </ul>
</div></div>
        <div class="col-md-9" role="main">

<h1 id="github-pages"><a href="../github/">GitHub</a> / Pages<a class="headerlink" href="#github-pages" title="Permanent link"> #</a></h1>
<ul>
<li><a href="https://pages.github.com/">GitHub Pages | Websites for you and your projects, hosted directly from your GitHub repository. Just edit, push, and your changes are live.</a><ul>
<li>Websites for you and your projects. Hosted directly from your GitHub repository. Just edit, push, and your changes are live.</li>
<li>You get one site per GitHub account and organization, and unlimited project sites. 分為 3 種 user/organization 及 project</li>
</ul>
</li>
<li><a href="https://help.github.com/articles/what-is-github-pages/">What is GitHub Pages? - User Documentation</a><ul>
<li>GitHub Pages is a STATIC SITE HOSTING SERVICE designed to host your personal, organization, or project pages directly from a GitHub repository.</li>
<li>GitHub Pages is a static site hosting service and doesn&rsquo;t support server-side code such as, PHP, Ruby, or Python.</li>
</ul>
</li>
</ul>
<h2 id="usage-limits">Usage Limits ??<a class="headerlink" href="#usage-limits" title="Permanent link"> #</a></h2>
<ul>
<li><a href="https://help.github.com/articles/what-is-github-pages/#usage-limits">Usage Limits - What is GitHub Pages? - User Documentation</a> #ril</li>
<li><a href="https://help.github.com/articles/github-terms-of-service/">GitHub Terms of Service - User Documentation</a> #ril</li>
</ul>
<h2 id="getting-started">新手上路 ??<a class="headerlink" href="#getting-started" title="Permanent link"> #</a></h2>
<ul>
<li><a href="https://help.github.com/articles/creating-project-pages-using-the-command-line/">Creating Project Pages using the command line - User Documentation</a> #ril</li>
</ul>
<h2 id="user-organization-project-pages">User, Organization, Project Pages ??<a class="headerlink" href="#user-organization-project-pages" title="Permanent link"> #</a></h2>
<ul>
<li>由於 user/organization site 的 <code>master</code> branch 被拿去做為網頁的內容，可以考慮將 source 放在 <code>source</code> branch；再者 <code>master</code> master 的 history 根本不重要。</li>
</ul>
<p>參考資料：</p>
<ul>
<li><a href="https://pages.github.com/">GitHub Pages | Websites for you and your projects, hosted directly from your GitHub repository. Just edit, push, and your changes are live.</a><ul>
<li>User site 跟 organization site 的做法相同；先建立名為 <code>NAME.github.io</code> 的 repo，其中 <code>NAME</code> 可以是 username 或是 organization name，再把內容寫在 <code>master</code> branch，就可以在 https://<username>.github.io 或 https://<orgname>.github.io 看到內容。</li>
<li>Project site 要在 Settings &gt; GitHub Pages 選定網站內容來自哪個 branch，預設是 None，可以選擇 <code>master</code> branch 或 <code>master branch /docs folder</code>，然後就可以在 https://<username>.github.io/<projectname> 或 https://<orgname>.github.io/<projectname> 看到內容；這裡完全沒提到 <code>gh-pages</code> branch。</li>
</ul>
</li>
<li><a href="https://help.github.com/articles/configuring-a-publishing-source-for-github-pages/">Configuring a publishing source for GitHub Pages - User Documentation</a><ul>
<li>就 user page 跟 organiation page 而言，repository 一定是 <code>&lt;username&gt;.github.io</code> 或 <code>&lt;orgname&gt;.github.io</code>，而且內容只能來自 <code>master</code> branch。</li>
<li>Project page 的內容來源就比較多選擇，可以是 <code>master</code>、<code>gh-pages</code> branch，或是 <code>master</code> branch 下的 <code>/docs</code> 子資料夾。</li>
<li>Default source settings for repositories without the username naming scheme 應該是呼應下面 &ldquo;not follow the repository naming scheme <username>.github.io or <orgname>.github.io&rdquo; 的說法，種情況下才會有 <code>master</code> 或 <code>gh-pages</code> 的選擇；當然 <code>gh-pages</code> branch 的選項要 repo 裡有這個 branch 時才會出現，不過 <code>master</code> branch 與 <code>master</code> branch /docs folder 這兩個選項固定存在 (能不能選是一回事)</li>
</ul>
</li>
<li><a href="https://help.github.com/articles/user-organization-and-project-pages/">User, Organization, and Project Pages - User Documentation</a><ul>
<li>Site 被歸為 2 類 project pages site 或 user/organization pages site，兩者間有些微的差異；主要是內容的來源。</li>
<li>Project pages site 附加在某個 project 下，所以內容來自同一個 repo 的 branch，但 user/organization pages site 有自己的 repo，所以只能來自 <code>master</code> branch。</li>
<li>If the URL for your GitHub Pages site contains a username or organization name that begins or ends in a dash, or contains consecutive dashes, then people browsing with Linux will receive a server error when they visit the site. 感覺是 hostname 不能以 <code>-</code> 開頭或結尾，也不能有連續的 <code>-</code>?</li>
</ul>
</li>
<li><a href="https://blog.github.com/2016-08-17-simpler-github-pages-publishing/">Simpler GitHub Pages publishing | The GitHub Blog</a> (2016-08-17)<ul>
<li>當 repository 專用於 website content 時用 <code>master</code> branch，而 <code>docs/</code> 資料夾的用法，則可以讓 code 跟 documentation 維護在同一個 branch 裡，好處是一個 PR 可以同時包含 code 與 documentation 的修改。</li>
<li>不過上述 <code>docs/</code> 的好處，只適合搭配 GitHub 內建的 generator (Jekyll) &ndash; publish from the <code>/docs</code> folder，若要用其他方式產生網站內容，就得採用同一 repository 的 <code>gh-pages</code> branch 或是另一個 repository 的 <code>master</code> branch。</li>
</ul>
</li>
<li><a href="https://help.github.com/articles/unpublishing-a-user-pages-site/">Unpublishing a User Pages site - User Documentation</a> 由於 user/organization site 的內容來自 <code>master</code> branch，所以把 <code>master</code> branch 刪除，或是將 repository (<code>&lt;username&gt;</code>.github.io`) 刪除；猜想將 repository 更名也可以?</li>
<li><a href="https://help.github.com/articles/unpublishing-a-project-pages-site/">Unpublishing a Project Pages site - User Documentation</a> 把 <code>gh-pages</code>/<code>master</code> branch 刪除即可 #ril</li>
</ul>
<h2 id="build">Build ??<a class="headerlink" href="#build" title="Permanent link"> #</a></h2>
<ul>
<li><a href="https://help.github.com/articles/user-organization-and-project-pages/#building-user-and-organization-pages-sites">Building User and Organization Pages sites - User, Organization, and Project Pages - User Documentation</a><ul>
<li>這裡的 build 指的是產生內容並推回 repo? 上面的 Building Project Pages sites 沒提到如何自動化??</li>
<li>User Pages sites 提到 They can also use DEPLOY KEYS to automate the process.</li>
<li>Organization Pages sites 提到 To automate builds, you can set up a MACHINE USER as a member of your organization. &hellip; Deploy keys aren&rsquo;t supported for Organization Pages sites.</li>
</ul>
</li>
</ul>
<h2 id="custom-domain">Custom Domain ??<a class="headerlink" href="#custom-domain" title="Permanent link"> #</a></h2>
<ul>
<li><a href="https://help.github.com/articles/quick-start-setting-up-a-custom-domain/">Quick start: Setting up a custom domain - User Documentation</a> #ril</li>
<li><a href="https://help.github.com/articles/user-organization-and-project-pages/#using-a-custom-domain-with-your-project-pages-site">Using a custom domain with your Project Pages site - User, Organization, and Project Pages - User Documentation</a> 一樣分 user/organization site 與 project site 來看<ul>
<li>User/organization site 採用 custom domain 後，也可以在  &ndash; the custom domain REPLACES username.github.io in the URL for all Project Pages sites hosted under that account.</li>
<li>Project Pages sites that use a custom domain are ALSO AVAILABLE at <code>username.github.io/projectname</code> for personal accounts, and <code>orgname.github.io/projectname</code> for organizations. 是指採用 custom domain 後，在 <a href="https://xxx.github.io/">https://xxx.github.io/</a><projectname> 還是看得到內容?</li>
</ul>
</li>
<li><a href="https://blog.github.com/2014-01-07-faster-more-awesome-github-pages/">Faster, More Awesome GitHub Pages | The GitHub Blog</a> (2014-01-07) #ril</li>
<li><a href="https://help.github.com/articles/using-a-custom-domain-with-github-pages/">Using a custom domain with GitHub Pages - User Documentation</a> #ril</li>
<li><a href="https://help.github.com/articles/what-is-github-pages/#guidelines-for-using-github-pages">What is GitHub Pages? - User Documentation</a> 提到 2016-07-15 採用 <code>github.io</code> domain 的 site 走 HTTPS，但在之前的 site 要另外啟用 HTTPS。</li>
<li><a href="https://help.github.com/articles/securing-your-github-pages-site-with-https/">Securing your GitHub Pages site with HTTPS - User Documentation</a> #ril</li>
<li><a href="https://help.github.com/articles/using-a-custom-domain-with-github-pages/">Using a custom domain with GitHub Pages - User Documentation</a> #ril</li>
<li><a href="https://help.github.com/articles/custom-domain-redirects-for-github-pages-sites/">Custom domain redirects for GitHub Pages sites - User Documentation</a> #ril</li>
<li><a href="https://help.github.com/articles/troubleshooting-custom-domains/">Troubleshooting custom domains - User Documentation</a> #ril</li>
</ul>
<h2 id="custom-404-page">Custom 404 Page ??<a class="headerlink" href="#custom-404-page" title="Permanent link"> #</a></h2>
<ul>
<li><a href="https://help.github.com/articles/creating-a-custom-404-page-for-your-github-pages-site/">Creating a custom 404 page for your GitHub Pages site - User Documentation</a> #ril</li>
</ul>
<h2 id="cache">Cache ??<a class="headerlink" href="#cache" title="Permanent link"> #</a></h2>
<ul>
<li><a href="https://stackoverflow.com/questions/12556593/">javascript - Determining a page is outdated on github pages - Stack Overflow</a> 提供的靜態網頁有 cache 時間過長的問題? #ril</li>
</ul>
<h2 id="google-ads">Google Ads ??<a class="headerlink" href="#google-ads" title="Permanent link"> #</a></h2>
<ul>
<li>Can I put Google Adsense Ads on a website hosted on GitHub Pages? - Quora <a href="https://www.quora.com/Can-I-put-Google-Adsense-Ads-on-a-website-hosted-on-GitHub-Pages">https://www.quora.com/Can-I-put-Google-Adsense-Ads-on-a-website-hosted-on-GitHub-Pages</a> Matt Auckland: GitHub 的人提到，加上廣告、捐款等為專案賺錢的東西，都是可以接受的。WebJeda: Google 並沒有針對任何 hosting 禁止，一開始會有一個空白處，大概 2 週後就開始有廣告進來。</li>
<li>Am I allowed to host a commerical website on Github Pages? - Web Applications Stack Exchange (2017-03-24) <a href="https://webapps.stackexchange.com/questions/56898/">https://webapps.stackexchange.com/questions/56898/</a> gman: TOS 裡的 &ldquo;Advertising on GitHub&rdquo; 提到，不會禁止在 GitHub 上打廣告，但還是有些限制以避免 GitHub 成為 spam haven；不過這裡比較偏 GitHub repository 而非 GitHub Pages。</li>
<li>AdSense on sub/domain I don&rsquo;t own? (Github pages) - Google Product Forums (2016-08-06) <a href="https://productforums.google.com/forum/#!topic/adsense/M01sopwmJ-k">https://productforums.google.com/forum/#!topic/adsense/M01sopwmJ-k</a> GitHub Pages 的網址輸入後出現 URL must not have a path (example.com/path) or subdomain (subdomain.example.com)。galeksic: &ldquo;the URL that you provide must be a domain that you own, and must not be a webpage or directory, or contain any parameters&rdquo; 所以 GitHub Pages 要採用 custom domain 才可以。</li>
</ul>
<h2 id="commercial-use">GitHub Pages 可以放商業網站嗎 ??<a class="headerlink" href="#commercial-use" title="Permanent link"> #</a></h2>
<ul>
<li>Am I allowed to host a commerical website on Github Pages? - Web Applications Stack Exchange <a href="https://webapps.stackexchange.com/questions/56898/">https://webapps.stackexchange.com/questions/56898/</a> Lasse V. Karlsen: 一開始 TOS 有提到 &ldquo;to host your company pages&rdquo;，nii236：後來這一段字被拿掉，當然你也可以把 organization 解釋成 company。2017 gman: 限制 GitHub Pages 不能超過 1G，每月流量 100GB，若超過會收到 GitHub Support 的來信，建議在前面加個 CDN 或是移到其他 hosting service。</li>
</ul>
<h2 id="stop-indexing">搜尋引擎不要爬 GitHub Pages 的內容 ??<a class="headerlink" href="#stop-indexing" title="Permanent link"> #</a></h2>
<p><img alt="" src="../imgs/github-pages/duplicated-index.png" width="70%" /></p>
<p>不知為何 User/Organization Pages 沒有這個問題 (可能是 <code>master</code> branch 直接放 HTML source 的關係?)，不過 Project Pages 確實有這個問題。</p>
<p>這要分兩個部份來看 &ndash; GitHub repo 跟 GitHub Pages，雖然都跟 <code>robots.txt</code> 有關，但前者由 <code>https://github.com/robots.txt</code> 控制，我們無權修改，但後者透過自訂 <code>robots.txt</code> 是可以解的。</p>
<pre><code>$ curl https://github.com/robots.txt 2&gt;/dev/null | grep 'User-agent: Googlebot' -A 2
User-agent: Googlebot
Allow: /*/*/tree/master
Allow: /*/*/blob/master
</code></pre>

<p>也就是說，就 GitHub repo 的問題而言，不要把 source 放 <code>master</code> branch 就好。</p>
<p>至於 Project Pages 則可以在 User Pages 下自訂 <code>https://username.github.io/robots.txt</code>：</p>
<pre><code>User-agent: *
Disallow: /my-project1/
Disallow: /my-project2/
</code></pre>

<p>參考資料：</p>
<ul>
<li>
<p><a href="https://stackoverflow.com/questions/15844905/">robots.txt - How to stop Google indexing my Github repository - Stack Overflow</a></p>
<ul>
<li>szabgab: What happens in the case of Github Pages? Those are sites where the source is in a Github repository. Do they have the same problem of duplication? 若 Google 去爬 GitHub repo，結果就會有兩份。</li>
<li>szabgab: The <a href="https://github.com/robots.txt">https://github.com/robots.txt</a> file of GitHub allows the indexing of the blobs in the &lsquo;master&rsquo; branch, but restricts all other branches. So if you don&rsquo;t have a &lsquo;master&rsquo; branch, Google is not supposed to index your pages. 可以利用 <code>robots.txt</code> 規範只爬 <code>master</code> branch 的特性，示範另建 branch 再刪 <code>master</code> 的做法：<pre><code>git checkout -b main
git push -u origin main
git branch -d master
git push origin :master
</code></pre>
</li>
</ul>
</li>
<li>
<p><a href="https://stackoverflow.com/questions/32784322/stopping-index-of-github-pages">robots.txt - Stopping index of Github pages - Stack Overflow</a></p>
<ul>
<li>
<p>olavimmanuel: You can use a <code>robots.txt</code> to stop indexing of your users GitHub Pages by adding it in your User Page. This <code>robots.txt</code> will be the active <code>robots.txt</code> for all your projects pages as the project pages are reachable as subdirectories (<code>username.github.io/project</code>) in your subdomain (<code>username.github.io</code>). 從 user page 下手，因為 project pages 只是 user page 的子目錄。</p>
<p>To block robots for one projects GitHub Page:</p>
<pre><code>User-agent: *
Disallow: /projectname/
</code></pre>
</li>
</ul>
</li>
</ul>
<h2 id="reference">參考資料<a class="headerlink" href="#reference" title="Permanent link"> #</a></h2>
<ul>
<li><a href="https://pages.github.com/">GitHub Pages</a></li>
</ul></div>
        
        
    </div>

    <footer class="col-md-12 text-center">
        
        <hr>
        <p>
        <small>Documentation built with <a href="http://www.mkdocs.org/">MkDocs</a>.</p></small>
        
        
    </footer>

    <script src="../js/jquery-3.3.1.min.js"></script>
    <script src="../js/bootstrap-3.0.3.min.js"></script>
    <script src="../js/highlight.pack.js"></script>
    <script>hljs.initHighlightingOnLoad();</script>
    <script>
    var base_url = '..';
    </script>
    <!-- <script data-main="../mkdocs/js/search.js" src="../mkdocs/js/require.js"></script> -->
    <script src="../js/base.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-MML-AM_CHTML"></script>
    <script src="../search/main.js"></script>

    <div class="modal" id="mkdocs_search_modal" tabindex="-1" role="dialog" aria-labelledby="Search Modal" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal">
                        <span aria-hidden="true">&times;</span>
                        <span class="sr-only">Close</span>
                    </button>
                    <h4 class="modal-title" id="exampleModalLabel">Search</h4>
                </div>
                <div class="modal-body">
                    <p>
                        From here you can search these documents. Enter your search terms below.
                    </p>
                    <form role="form">
                        <div class="form-group">
                            <input type="text" class="form-control" placeholder="Search..." id="mkdocs-search-query">
                        </div>
                    </form>
                    <div id="mkdocs-search-results"></div>
                </div>
                <div class="modal-footer">
                </div>
            </div>
        </div>
    </div>

    </body>

</html>

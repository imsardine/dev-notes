<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">  
    <link rel="canonical" href="https://imsardine.github.io/dev-notes/java-type/">
    <link rel="shortcut icon" href="../img/favicon.ico">

    
    <title>Java Programming / Data Type - 建造以學習 | 在電梯裡遇見雙胞胎</title>
    

    <link rel="stylesheet" href="//use.fontawesome.com/releases/v5.5.0/css/all.css" integrity="sha384-B4dIYHKNBt8Bc12p+WXckhzcICo0wtJAoU8YZTY5qE0Id1GSseTk6S+L3BlXeVIU" crossorigin="anonymous">
    <link rel="stylesheet" href="//cdn.jsdelivr.net/font-hack/3.003/css/hack.min.css">
    <link href='//fonts.googleapis.com/css?family=PT+Sans:400,400italic,700,700italic&subset=latin-ext,latin' rel='stylesheet' type='text/css'>
    <link href='//fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,700italic,400,300,600,700&subset=latin-ext,latin' rel='stylesheet' type='text/css'>
    <link href="../css/bootstrap-custom.min.css" rel="stylesheet">
    <link href="../css/base.min.css" rel="stylesheet">
    <link href="../css/cinder.min.css" rel="stylesheet">
    <link rel="stylesheet" href="../css/highlight.min.css">
    <link href="../cinder_extra.css" rel="stylesheet">

    <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
            <script src="https://cdn.jsdelivr.net/npm/html5shiv@3.7.3/dist/html5shiv.min.js"></script>
            <script src="https://cdn.jsdelivr.net/npm/respond.js@1.4.2/dest/respond.min.js"></script>
        <![endif]-->

    <script src="https://ajax.googleapis.com/ajax/libs/webfont/1.6.28/webfont.js"></script>
    <script>
    WebFont.load({
        google: {
            families: ['Open Sans', 'PT Sans']
        }
    });
    </script>

    

     
</head>

<body>

    <div class="navbar navbar-default navbar-fixed-top" role="navigation">
    <div class="container">

        <!-- Collapsed navigation -->
        <div class="navbar-header">
            <!-- Expander button -->
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            

            <!-- Main title -->

            <a class="navbar-brand" href="..">建造以學習 | 在電梯裡遇見雙胞胎</a>
        </div>

        <!-- Expanded navigation -->
        <div class="navbar-collapse collapse">

            <ul class="nav navbar-nav navbar-right">
                    <li>
                        <a href="#" data-toggle="modal" data-target="#mkdocs_search_modal">
                            <i class="fas fa-search"></i> Search
                        </a>
                    </li>
                    <li>
                        <a href="https://github.com/imsardine/dev-notes/blob/source/docs/java-type.md">Edit on imsardine/dev-notes</a>
                    </li>
            </ul>
        </div>
    </div>
</div>

    <div class="container">
        
        
        <div class="col-md-3"><div class="bs-sidebar hidden-print affix well" role="complementary">
    <ul class="nav bs-sidenav">
        <li class="first-level active"><a href="#java-programming-data-type">Java Programming / Data Type</a></li>
            <li class="second-level"><a href="#boxing">Auboxing, Unboxing</a></li>
                
            <li class="second-level"><a href="#reference">參考資料</a></li>
                
    </ul>
</div></div>
        <div class="col-md-9" role="main">

<h1 id="java-programming-data-type"><a href="../java-prog/">Java Programming</a> / Data Type<a class="headerlink" href="#java-programming-data-type" title="Permanent link"> #</a></h1>
<h2 id="boxing">Auboxing, Unboxing<a class="headerlink" href="#boxing" title="Permanent link"> #</a></h2>
<ul>
<li>
<p><a href="https://docs.oracle.com/javase/tutorial/java/data/autoboxing.html">Autoboxing and Unboxing (The Java™ Tutorials &gt; Learning the Java Language &gt; Numbers and Strings)</a></p>
<ul>
<li>
<p>AUTOBOXING is the automatic conversion that the Java compiler makes between the PRIMITIVE TYPES and their corresponding OBJECT WRAPPER CLASSES. For example, converting an <code>int</code> to an <code>Integer</code>, a <code>double</code> to a <code>Double</code>, and so on. If the conversion goes the other way, this is called UNBOXING.</p>
<p>Here is the simplest example of autoboxing:</p>
<pre><code>Character ch = 'a';
</code></pre>
<p>The rest of the examples in this section use generics. If you are not yet familiar with the syntax of generics, see the Generics (Updated) lesson.</p>
</li>
<li>
<p>Consider the following code:</p>
<pre><code>List&lt;Integer&gt; li = new ArrayList&lt;&gt;();
for (int i = 1; i &lt; 50; i += 2)
    li.add(i);
</code></pre>
<p>Although you add the <code>int</code> values as primitive types, rather than <code>Integer</code> objects, to <code>li</code>, the code compiles. Because <code>li</code> is a list of <code>Integer</code> objects, not a list of <code>int</code> values, you may wonder why the Java compiler does not issue a compile-time error. The compiler does not generate an error because it creates an <code>Integer</code> object from <code>i</code> and adds the object to <code>li</code>. Thus, the compiler converts the previous code to the following at RUNTIME:</p>
<pre><code>List&lt;Integer&gt; li = new ArrayList&lt;&gt;();
for (int i = 1; i &lt; 50; i += 2)
    li.add(Integer.valueOf(i));
</code></pre>
<p>雖然 boxing 是 Compiler 在背後動手腳，但也只是把 Java code 改掉，例如這裡的 <code>li.add(i)</code> -&gt; <code>li.add(Integer.valueOf(i))</code>，所以是會增加 runtime 成本的。</p>
</li>
<li>
<p>Converting a primitive value (an <code>int</code>, for example) into an object of the corresponding wrapper class (<code>Integer</code>) is called autoboxing. The Java compiler applies autoboxing when a primitive value is:</p>
<ul>
<li>Passed as a parameter to a method that expects an object of the corresponding wrapper class.</li>
<li>Assigned to a variable of the corresponding wrapper class.</li>
</ul>
</li>
<li>
<p>Consider the following method:</p>
<pre><code>public static int sumEven(List&lt;Integer&gt; li) {
    int sum = 0;
    for (Integer i: li)
        if (i % 2 == 0)
            sum += i;
        return sum;
}
</code></pre>
<p>Because the remainder (<code>%</code>) and unary plus (<code>+=</code>) operators do not apply to <code>Integer</code> objects, you may wonder why the Java compiler compiles the method without issuing any errors. The compiler does not generate an error because it invokes the <code>intValue</code> method to convert an <code>Integer</code> to an <code>int</code> AT RUNTIME:</p>
<pre><code>public static int sumEven(List&lt;Integer&gt; li) {
    int sum = 0;
    for (Integer i : li)
        if (i.intValue() % 2 == 0)
            sum += i.intValue();
        return sum;
}
</code></pre>
</li>
<li>
<p>Converting an object of a wrapper type (<code>Integer</code>) to its corresponding primitive (<code>int</code>) value is called unboxing. The Java compiler applies unboxing when an object of a wrapper class is:</p>
<ul>
<li>Passed as a parameter to a method that expects a value of the corresponding primitive type.</li>
<li>Assigned to a variable of the corresponding primitive type.</li>
</ul>
<p>The Unboxing example shows how this works:</p>
<pre><code>import java.util.ArrayList;
import java.util.List;

public class Unboxing {

    public static void main(String[] args) {
        Integer i = new Integer(-8);

        // 1. Unboxing through method invocation
        int absVal = absoluteValue(i);
        System.out.println("absolute value of " + i + " = " + absVal);

        List&lt;Double&gt; ld = new ArrayList&lt;&gt;();
        ld.add(3.1416);    // Π is autoboxed through method invocation.

        // 2. Unboxing through assignment
        double pi = ld.get(0);
        System.out.println("pi = " + pi);
    }

    public static int absoluteValue(int i) {
        return (i &lt; 0) ? -i : i;
    }
}
</code></pre>
<p>The program prints the following:</p>
<pre><code>absolute value of -8 = 8
pi = 3.1416
</code></pre>
</li>
<li>
<p>Autoboxing and unboxing lets developers write CLEANER CODE, making it easier to read. The following table lists the primitive types and their corresponding wrapper classes, which are used by the Java compiler for autoboxing and unboxing:</p>
<p>| Primitive type | Wrapper class |
| <code>boolean</code> | <code>Boolean</code> |
| <code>byte</code> | <code>Byte</code> |
| <code>char</code> | <code>Character</code> |
| <code>float</code> | <code>Float</code> |
| <code>int</code> | <code>Integer</code> |
| <code>long</code> | <code>Long</code> |
| <code>short</code> | <code>Short</code> |
| <code>double</code> | <code>Double</code> |</p>
</li>
</ul>
</li>
</ul>
<h2 id="reference">參考資料<a class="headerlink" href="#reference" title="Permanent link"> #</a></h2></div>
        
        
    </div>

    <footer class="col-md-12 text-center">
        
        <hr>
        <p>
        <small>Documentation built with <a href="http://www.mkdocs.org/">MkDocs</a>.</p></small>
        
        
    </footer>

    <script src="../js/jquery-3.3.1.min.js"></script>
    <script src="../js/bootstrap-3.0.3.min.js"></script>
    <script src="../js/highlight.pack.js"></script>
    <script>hljs.initHighlightingOnLoad();</script>
    <script>
    var base_url = '..';
    </script>
    <!-- <script data-main="../mkdocs/js/search.js" src="../mkdocs/js/require.js"></script> -->
    <script src="../js/base.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-MML-AM_CHTML"></script>
    <script src="../search/main.js"></script>

    <div class="modal" id="mkdocs_search_modal" tabindex="-1" role="dialog" aria-labelledby="Search Modal" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal">
                        <span aria-hidden="true">&times;</span>
                        <span class="sr-only">Close</span>
                    </button>
                    <h4 class="modal-title" id="exampleModalLabel">Search</h4>
                </div>
                <div class="modal-body">
                    <p>
                        From here you can search these documents. Enter your search terms below.
                    </p>
                    <form role="form">
                        <div class="form-group">
                            <input type="text" class="form-control" placeholder="Search..." id="mkdocs-search-query">
                        </div>
                    </form>
                    <div id="mkdocs-search-results"></div>
                </div>
                <div class="modal-footer">
                </div>
            </div>
        </div>
    </div>

    </body>

</html>
